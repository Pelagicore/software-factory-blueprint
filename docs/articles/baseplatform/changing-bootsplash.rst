:orphan:

Changing bootsplash
===================

PELUX uses PSplash for graphical boot splash screen. The PELUX reference images come
with a default boot splash screen containing the PELUX logo.

Changing appearance
-------------------

PSplash is not configurable software, therefore in order to change the colors of the
background and the progress bar, one needs to modify psplash-colors.h in the source code
tree.

PELUX handles those modifications with patches located in `meta-pelux/recipes-core/psplash/psplash/`.

Changing logo
-------------

Custom logo can be generated with the `make-image-header.sh` script that is part of PSplash
source code: [#1]_

.. code:: bash

   ./make-image-header.sh < PATH_TO_IMAGE.png > NAME

The script will create a file named file NAME_filename-img.h with GdkPixbuf RGBA C-Source
image dump.[#2]_

Copy this file to `meta-pelux/recipes-core/psplash/psplash/` or your own meta-layer and add
the following to the bbappend for the psplash package:

.. code:: bash

   SPLASH_IMAGES_append = " file://NAME_logo-img.h;outsuffix=pelux"

   ALTERNATIVE_PRIORITY_psplash-pelux[psplash] = "200"

.. note:: ALTERNATIVE_PRIORITY_psplash has to be higher than 100 as it is the assigned to
          the default bootsplash in meta-poky.

Replace `NAME_logo-img.h` with the filename generated by `make-image-header.sh`. Optionally,
change suffix from `pelux` to a custom one.

As a result, bitbake will generate a separate package `psplash-suffix`, e.g. `psplash-pelux`.
Assign this name as a value of the `SPLASH` variable in your `local.conf`, e.g.:

.. code:: bash

    SPLASH = "psplash-suffix"

and add `slash` IMAGE_FEATURE to your image:

.. code:: bash

    IMAGE_FEATURES_append = " splash"

.. [#1] http://git.yoctoproject.org/cgit/cgit.cgi/psplash/
.. [#2] https://developer.gnome.org/gdk-pixbuf/
